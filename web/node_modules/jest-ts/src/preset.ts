import type { Config } from "@jest/types";

const jestPreset: Config.InitialOptions = {
  transform: {
    // 直接使用模块路径+导出名称（Jest会自动解析打包后的模块）
    "^.+\\.(ts|tsx)$": "./index.js#transformer"
  },
  moduleFileExtensions: ["ts", "tsx", "js", "json", "node"],
  testEnvironment: "node",
  globals: {
    "jest-ts": {
      cacheDirectory: "./node_modules/.cache/jest-ts",
      typeCheck: true,
      tsconfigPath: "./tsconfig.json"
    }
  },
  testMatch: ["**/__tests__/**/*.+(ts|tsx|js)"]
};

export default jestPreset;
