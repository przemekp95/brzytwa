import type { TransformOptions as EsbuildTransformOptions } from "esbuild";

/** 自定义转译配置选项 */
export interface JestTsOptions {
  /** 缓存目录路径（支持<rootDir>占位符） */
  cacheDirectory: string;
  /** 是否启用类型检查（默认false） */
  typeCheck: boolean;
  /** tsconfig.json路径 */
  tsconfigPath: string;
  /** esbuild额外配置选项 */
  esbuildOptions?: EsbuildTransformOptions;
  /** 目标环境（如node16、es2020） */
  target?: string;
  /** 输出模块格式（cjs或esm） */
  format?: "cjs" | "esm";
}

/** 缓存数据结构 */
export interface CacheData {
  /** 转译后的代码 */
  code: string;
  /** 源映射（可选） */
  map?: string;
  /** 最后修改时间戳（用于缓存失效） */
  mtime: number;
}
